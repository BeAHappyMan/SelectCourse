<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.SelectCourse.dao.CourseDao">
    <insert id="addCourse">
        insert into SelectCourse.course
        (course_name, course_id, course_information,
         course_pass, course_max_student_number,course_credit,
         course_teacher_id)
            value (#{courseName}, #{courseId}, #{courseInformation},
                   #{coursePass}, #{courseMaxStudentNumber},#{courseCredit},
                   #{courseTeacherId})

    </insert>


    <select id="queryAllCourses" resultMap="CourseClassTime">
        select c1.course_id,
               c1.course_information,
               c1.course_max_student_number,
               c1.course_name,
               c1.course_student_number,
               c1.course_teacher_id,
               c2.class_end_time,
               c2.class_start_time,
               c2.class_number,
               c2.class_week,
               c2.course_location
        from SelectCourse.course c1,
             SelectCourse.classtime c2
        where c1.course_id = c2.course_id
          and c1.course_pass = 1

    </select>

    <resultMap id="CourseClassTime" type="course">
        <result property="courseName" column="course_name"/>
        <result property="courseId" column="course_id"/>
        <result property="courseInformation" column="course_information"/>
        <result property="courseMaxStudentNumber" column="course_max_student_number"/>
        <result property="courseStudentNumber" column="course_student_number"/>
        <result property="courseTeacherId" column="course_teacher_id"/>
        <association property="classTime" javaType="classTime">
            <result property="courseLocation" column="course_location"/>
            <result property="classWeek" column="class_weekend"/>
            <result property="classStartTime" column="class_start_time"/>
            <result property="classEndTime" column="class_end_time"/>
            <result property="classNumber" column="class_number"/>
            <result property="courseId" column="course_id"/>
        </association>
    </resultMap>


</mapper>